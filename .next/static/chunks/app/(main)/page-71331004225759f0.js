(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7974],{6286:function(e,t,s){Promise.resolve().then(s.bind(s,8228))},8228:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var n=s(9268),l=s(6006),a=s(7490),r=s(4412),c=s(4777),i=s(447),o=s(856),d=s.n(o),m=s(7014),u=s(9496);let x=i.Z.create({baseURL:m._});(0,u.Z)(x);class h{}h.getDashboardInfor=async e=>{try{let t=await x.get("/dashboard/infor",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});return t.data}catch(e){d().fire({icon:"error",title:e.message})}},h.getDashboardChart=async e=>{try{let t=await x.get("/dashboard/chart",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});return t.data}catch(e){d().fire({icon:"error",title:e.message})}};var p=s(5884);function g(){let{token:e}=(0,l.useContext)(p.V),[t,s]=(0,l.useState)(null),[i,o]=(0,l.useState)(null),[d,m]=(0,l.useState)({}),[u,x]=(0,l.useState)({}),[g,f]=(0,l.useState)({}),[j,b]=(0,l.useState)({}),[v,N]=(0,l.useState)({}),[y,w]=(0,l.useState)({});return(0,l.useEffect)(()=>{let e=getComputedStyle(document.documentElement),t=e.getPropertyValue("--text-color"),s=e.getPropertyValue("--text-color-secondary"),n=e.getPropertyValue("--surface-border"),l=[],a=[],r=[],c=["1","2","3","4","5","6","7","8","9","10","11","12"],i=new Date().getMonth();for(let e=0;e<12;e++)e<=i?c[e]=c[e]+"/"+new Date().getFullYear():c[e]=c[e]+"/"+(new Date().getFullYear()-1),l.push(Math.floor(3e3*Math.random())),a.push(Math.floor(3e3*Math.random())),r.push(Math.floor(3e3*Math.random()));let o={labels:c,datasets:[{type:"bar",label:"Tr\xe0",backgroundColor:e.getPropertyValue("--blue-500"),data:l},{type:"bar",label:"B\xe1nh ngọt",backgroundColor:e.getPropertyValue("--green-500"),data:a},{type:"bar",label:"C\xe0 ph\xea",backgroundColor:e.getPropertyValue("--yellow-500"),data:r}]};m(o),x({maintainAspectRatio:!1,aspectRatio:.8,plugins:{tooltips:{mode:"index",intersect:!1},legend:{labels:{color:t}}},scales:{x:{stacked:!0,ticks:{color:s},grid:{color:n}},y:{stacked:!0,ticks:{color:s},grid:{color:n}}}})},[]),(0,l.useEffect)(()=>{let t=async()=>{var t,n;let l=await h.getDashboardInfor(e.accessToken),a=await h.getDashboardChart(e.accessToken);s(l.data),o(a.data),getComputedStyle(document.documentElement);let c=Object.keys(null===(t=a.data)||void 0===t?void 0:t.productToday),i=Object.values(null===(n=a.data)||void 0===n?void 0:n.productToday);f({labels:c,datasets:[{data:i}]}),b({cutout:"40%"}),((e,t)=>{let s=getComputedStyle(document.documentElement),n=s.getPropertyValue("--text-color"),l=s.getPropertyValue("--text-color-secondary"),a=s.getPropertyValue("--surface-border"),c=(0,r.NC)(new Date().getFullYear(),new Date().getMonth()+1),i=[];for(let e=1;e<=c;e++)i.push(e);let o={labels:i,datasets:[{label:"Th\xe1ng trước",data:t,fill:!1,borderColor:s.getPropertyValue("--yellow-500"),tension:.4,backgroundColor:s.getPropertyValue("--yellow-500")},{label:"Hiện tại",data:e,fill:!1,borderColor:s.getPropertyValue("--blue-500"),tension:.4,backgroundColor:s.getPropertyValue("--blue-500")}]};N(o),w({maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{labels:{color:n}}},scales:{x:{ticks:{color:l},grid:{color:a}},y:{ticks:{color:l},grid:{color:a}}}})})(a.data.chart.dataPresent,a.data.chart.dataOldMonth)};t()},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"grid",children:[(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0 h-full",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Đơn h\xe0ng"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl",children:null==t?void 0:t.orders.total})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-shopping-cart text-blue-500 text-xl"})})]}),(0,n.jsxs)("span",{className:"text-green-500 font-medium",children:[null==t?void 0:t.orders.new," đơn mới "]}),(0,n.jsx)("span",{className:"text-500",children:"kể từ 30 ng\xe0y trước"})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0 h-full",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Doanh thu"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl",children:(0,r.e2)(null==t?void 0:t.revenue.data)})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-orange-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-map-marker text-orange-500 text-xl"})})]}),(0,n.jsxs)("span",{className:"text-green-500 font-medium",children:[(null==t?void 0:t.revenue.increase)?"Tăng":"Giảm"," ",null==t?void 0:t.revenue.percent,"%"," "]}),(0,n.jsx)("span",{className:"text-500",children:"kể từ th\xe1ng trước "})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0 h-full",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Người d\xf9ng"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl",children:null==t?void 0:t.users.total})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-cyan-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-inbox text-cyan-500 text-xl"})})]}),(0,n.jsxs)("span",{className:"text-green-500 font-medium",children:[null==t?void 0:t.users.new," "]}),(0,n.jsx)("span",{className:"text-500",children:"người đăng k\xed mới trong 7 ng\xe0y qua"})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0 h-full",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"B\xecnh luận"}),(0,n.jsxs)("div",{className:"text-900 font-medium text-xl",children:[null==t?void 0:t.comment.present," Mới"]})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-purple-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-comment text-purple-500 text-xl"})})]}),(0,n.jsxs)("span",{className:"text-500",children:[(null==t?void 0:t.comment.present)>(null==t?void 0:t.comment.old)?"Nhiều":"\xcdt"," hơn so với th\xe1ng trước:"]}),(0,n.jsxs)("span",{className:"text-green-500 font-medium",children:[" ",null==t?void 0:t.comment.old]})]})})]}),(0,n.jsxs)("div",{className:"grid",children:[(0,n.jsx)("div",{className:"col-12 xl:col-4",children:(0,n.jsxs)("div",{className:"card mb-2",children:[(0,n.jsx)("h5",{children:"Số lượng sản phẩm trong ng\xe0y"}),(0,n.jsx)(a.k,{type:"doughnut",data:g,options:j,height:"45vh",className:"flex justify-content-center"})]})}),(0,n.jsx)("div",{className:"col-12 xl:col-8",children:(0,n.jsxs)("div",{className:"card mb-2",children:[(0,n.jsx)("h5",{children:"Bảng thống k\xea theo th\xe1ng"}),(0,n.jsx)(a.k,{type:"bar",data:v,options:y,height:"45vh"})]})})]}),(0,n.jsxs)("div",{className:"grid",children:[(0,n.jsx)("div",{className:"col-12 xl:col-6",children:(0,n.jsxs)("div",{className:"card max-h-30rem overflow-y-scroll",children:[(0,n.jsxs)("div",{className:"flex align-items-center justify-content-between mb-4",children:[(0,n.jsx)("h5",{children:"Th\xf4ng b\xe1o"}),(0,n.jsx)("div",{children:(0,n.jsx)(c.v,{popup:!0,model:[{label:"Add New",icon:"pi pi-fw pi-plus"},{label:"Remove",icon:"pi pi-fw pi-minus"}]})})]}),(0,n.jsx)("span",{className:"block text-600 font-medium mb-3",children:"Mới nhất"}),(0,n.jsx)("ul",{className:"p-0 mx-0 mt-0 mb-4 list-none",children:null==i?void 0:i.notification.map((e,t)=>(0,n.jsxs)("li",{className:"flex align-items-center py-2 border-bottom-1 surface-border",children:[(0,n.jsx)("div",{className:"w-3rem h-3rem flex align-items-center justify-content-center bg-blue-100 border-circle mr-3 flex-shrink-0",children:(0,n.jsx)("i",{className:"pi pi-dollar text-xl text-blue-500"})}),(0,n.jsxs)("span",{className:"text-900 line-height-3",children:[e.username," ",(0,n.jsxs)("span",{className:"text-700",children:["đ\xe3 đặt một đơn h\xe0ng trị gi\xe1 ",(0,n.jsxs)("span",{className:"text-blue-500",children:[e.totalBill,".000đ"]})]})]})]},t))})]})}),(0,n.jsx)("div",{className:"col-12 xl:col-6",children:(0,n.jsxs)("div",{className:"card max-h-30rem",children:[(0,n.jsx)("div",{className:"flex justify-content-between align-items-center mb-5",children:(0,n.jsx)("h5",{children:"Sản phẩm b\xe1n chạy"})}),(0,n.jsx)("ul",{className:"list-none p-0 m-0",children:null==i?void 0:i.bestSeller.map((e,t)=>(0,n.jsxs)("li",{className:"flex flex-column md:flex-row md:align-items-center md:justify-content-between mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-900 font-medium mr-2 mb-1 md:mb-0",children:e.productName}),(0,n.jsx)("div",{className:"mt-1 text-600 capitalize",children:e.category})]}),(0,n.jsx)("div",{className:"mt-2 md:mt-0 flex align-items-center",children:(0,n.jsx)("span",{className:"text-orange-500 ml-3 font-medium",children:"BEST SELLER!!!"})})]},t))})]})})]}),(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("h5",{children:"Bảng thống k\xea theo năm"}),(0,n.jsx)(a.k,{type:"bar",data:d,options:u,height:"30vh"})]})]})}},9496:function(e,t,s){"use strict";var n=s(1712);t.Z=e=>{e.interceptors.request.use(e=>{let t=n.Z.get("tokenAdmin");if(t){let s=JSON.parse(t);e.headers.setAccept("application/json"),e.headers.setAuthorization("Bearer "+s.accessToken)}return e},e=>(console.error("Request interceptor error:",e),Promise.reject(e))),e.interceptors.response.use(e=>e,e=>(console.error("Response interceptor error:",e),n.Z.remove("tokenAdmin"),window.location.assign("/auth/login"),Promise.reject(e)))}},7014:function(e,t,s){"use strict";s.d(t,{_:function(){return n}});let n="https://coffeewebapi-production.up.railway.app"},4412:function(e,t,s){"use strict";function n(e){let t=new Date(e),s=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getFullYear().toString(),a=t.getHours().toString().padStart(2,"0"),r=t.getMinutes().toString().padStart(2,"0"),c=t.getSeconds().toString().padStart(2,"0");return"".concat(a,":").concat(r,":").concat(c," ").concat(s,"-").concat(n,"-").concat(l," ")}function l(e,t){return new Date(e,t,0).getDate()}function a(e){let t="0";return e&&(t=e.toString()+"000"),new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t)}s.d(t,{Jn:function(){return n},NC:function(){return l},e2:function(){return a}})},5884:function(e,t,s){"use strict";s.d(t,{H:function(){return r},V:function(){return a}});var n=s(9268),l=s(6006);let a=(0,l.createContext)({}),r=e=>{let{children:t}=e,[s,r]=(0,l.useState)({accessToken:"",refreshToken:""});return(0,n.jsx)(a.Provider,{value:{token:s,setToken:r},children:t})}}},function(e){e.O(0,[1987,434,2713,8285,4307,8067,9253,9257,1744],function(){return e(e.s=6286)}),_N_E=e.O()}]);