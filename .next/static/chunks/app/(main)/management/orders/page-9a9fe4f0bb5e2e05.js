(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2808],{8862:function(e,t){var n,r;void 0!==(r="function"==typeof(n=function(){return function e(t,n,r){var a,s,o=window,i="application/octet-stream",l=r||i,c=t,d=!n&&!r&&c,u=document.createElement("a"),p=function(e){return String(e)},h=o.Blob||o.MozBlob||o.WebKitBlob||p,m=n||"download";if(h=h.call?h.bind(o):Blob,"true"===String(this)&&(l=(c=[c,l])[0],c=c[1]),d&&d.length<2048&&(m=d.split("/").pop().split("?")[0],u.href=d,-1!==u.href.indexOf(d))){var f=new XMLHttpRequest;return f.open("GET",d,!0),f.responseType="blob",f.onload=function(t){e(t.target.response,m,i)},setTimeout(function(){f.send()},0),f}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(c)){if(!(c.length>2096103.424)||h===p)return navigator.msSaveBlob?navigator.msSaveBlob(y(c),m):v(c);l=(c=y(c)).type||i}else if(/([\x80-\xff])/.test(c)){for(var b=0,g=new Uint8Array(c.length),x=g.length;b<x;++b)g[b]=c.charCodeAt(b);c=new h([g],{type:l})}function y(e){for(var t=e.split(/[:;,]/),n=t[1],r=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),a=r.length,s=0,o=new Uint8Array(a);s<a;++s)o[s]=r.charCodeAt(s);return new h([o],{type:n})}function v(e,t){if("download"in u)return u.href=e,u.setAttribute("download",m),u.className="download-js-link",u.innerHTML="downloading...",u.style.display="none",document.body.appendChild(u),setTimeout(function(){u.click(),document.body.removeChild(u),!0===t&&setTimeout(function(){o.URL.revokeObjectURL(u.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,i)),!window.open(e)&&confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,i)),n.src=e,setTimeout(function(){document.body.removeChild(n)},333)}if(a=c instanceof h?c:new h([c],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(a,m);if(o.URL)v(o.URL.createObjectURL(a),!0);else{if("string"==typeof a||a.constructor===p)try{return v("data:"+l+";base64,"+o.btoa(a))}catch(e){return v("data:"+l+","+encodeURIComponent(a))}(s=new FileReader).onload=function(e){v(this.result)},s.readAsDataURL(a)}return!0}})?n.apply(t,[]):n)&&(e.exports=r)},3393:function(e,t,n){Promise.resolve().then(n.bind(n,9088))},9088:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var r=n(9268),a=n(6006),s=n(856),o=n.n(s),i=n(447),l=n(7014),c=n(9496);let d=i.Z.create({baseURL:l._});(0,c.Z)(d);class u{}u.postOrder=async e=>{let t=await d.post("/orders",e);return t.data},u.getOrderById=async e=>{let t=await d.get("/orders/".concat(e));return t.data},u.getListOrder=async e=>{try{if(e){let t=e.page||"",n=e.limit||"",r=e.keyword||"",a=e.depth||"3",s=await d.get("/orders?page=".concat(t,"&limit=").concat(n,"&keyword=").concat(r,"&depth=").concat(a));return s.data}throw{message:"Kh\xf4ng t\xecm thấy đơn h\xe0ng của bạn"}}catch(e){o().fire({icon:"error",title:"C\xf3 lỗi xảy ra",text:e.message})}},u.putOrder=async e=>{try{let t=await d.put("/orders",e);return t.data}catch(e){o().fire({icon:"error",title:"C\xf3 lỗi xảy ra",text:e.message})}};var p=n(716),h=n(8176),m=n(315),f=n(7633),b=n(3702),g=n(113),x=n(4390),y=e=>{let{orderId:t,visible:n,setVisible:s}=e,[o,i]=(0,a.useState)(null);function l(e){try{return e=parseFloat(e.toString()),e=Math.round(1e3*e),new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e)}catch(e){return"Số tiền kh\xf4ng hợp lệ"}}return(0,a.useEffect)(()=>{let e=async()=>{let e=await u.getOrderById(t),n=[...e.order.items];n=n.map(async e=>{let t=await g.M.getProductById(e.productId),n=[...t.product.sizes];return{...n.filter(t=>t._id===e.sizeId)[0],...t.product,...e}});let r=await Promise.all(n);e.order.items=r,i(e.order)};""!=t&&e()},[t]),(0,r.jsxs)(x.V,{header:(0,r.jsx)("p",{className:"text-3xl text-center",children:"Chi tiết đơn h\xe0ng"}),visible:n,onHide:()=>s(!1),style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},children:[(0,r.jsxs)("div",{className:"border border-bottom-1 mb-2 pb-2",children:[(0,r.jsxs)("h2",{className:"mb-3",children:["1. Th\xf4ng tin kh\xe1ch h\xe0ng: ",(0,r.jsxs)("span",{className:"text-xl",children:["#",null==o?void 0:o.orderNumber]})]}),(0,r.jsxs)("div",{className:"grid",children:[(0,r.jsxs)("div",{className:"col",children:[(0,r.jsxs)("p",{className:"mb-1 ",children:[(0,r.jsx)("span",{className:"font-bold",children:"T\xean kh\xe1ch h\xe0ng: "}),null==o?void 0:o.customer.username]}),(0,r.jsxs)("p",{className:"mb-1",children:[(0,r.jsx)("span",{className:"font-bold",children:"Email: "}),null==o?void 0:o.customer.email]}),(0,r.jsxs)("p",{className:"mb-1",children:[(0,r.jsx)("span",{className:"font-bold",children:"Số điện thoại: "}),null==o?void 0:o.customer.phone]})]}),(0,r.jsxs)("div",{className:"col-7",children:[(0,r.jsxs)("p",{className:"mb-1",children:[(0,r.jsx)("span",{className:"font-bold",children:"Địa chỉ: "}),null==o?void 0:o.customer.address]}),(0,r.jsxs)("p",{className:"mb-1",children:[(0,r.jsx)("span",{className:"font-bold",children:"Ghi ch\xfa: "}),null==o?void 0:o.note]})]})]})]}),(0,r.jsxs)("div",{className:"border border-bottom-1 mb-4",children:[(0,r.jsx)("h2",{children:"2. Th\xf4ng tin sản phẩm"}),(0,r.jsxs)(h.w,{value:null==o?void 0:o.items,children:[(0,r.jsx)(p.s,{field:"productName",header:"T\xean sản phẩm"}),(0,r.jsx)(p.s,{field:"price",header:"Gi\xe1",body:e=>(0,r.jsx)("p",{children:l(e.price)})}),(0,r.jsx)(p.s,{field:"quantity",header:"Số lượng"}),(0,r.jsx)(p.s,{field:"name",header:"Size",bodyClassName:"uppercase"}),(0,r.jsx)(p.s,{field:"total",header:"Tổng",body:e=>(0,r.jsx)("p",{children:l(e.price*e.quantity)})})]})]}),(0,r.jsx)("div",{className:"flex flex-column align-items-end mr-4",children:(0,r.jsx)("table",{className:"text-xl",children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"text-right",children:(0,r.jsx)("span",{className:"font-bold mr-4",children:"Ph\xed vận chuyển:"})}),(0,r.jsx)("td",{children:l(null==o?void 0:o.freightCost)})]}),(0,r.jsxs)("tr",{className:"font-bold text-2xl",children:[(0,r.jsx)("td",{className:"text-right",children:(0,r.jsx)("span",{className:"font-bold mr-4",children:"Tổng gi\xe1 trị đơn h\xe0ng:"})}),(0,r.jsx)("td",{children:l(null==o?void 0:o.totalAmount)})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"text-right",children:(0,r.jsx)("span",{className:"font-bold mr-4",children:"Phương thức thanh to\xe1n:"})}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{className:"uppercase",children:null==o?void 0:o.paymentMethod})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"text-right",children:(0,r.jsx)("span",{className:"font-bold mr-4",children:"Trạng th\xe1i đơn h\xe0ng:"})}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{className:"uppercase",children:null==o?void 0:o.status})})]})]})})})]})},v=n(845),j=n(2900),w=n(8862),N=n.n(w),O=()=>{let[e,t]=(0,a.useState)(!1),[n,s]=(0,a.useState)([]),[i,c]=(0,a.useState)(100),[d,g]=(0,a.useState)(""),[x,w]=(0,a.useState)(0),[O,S]=(0,a.useState)(5),[P,E]=(0,a.useState)(""),[k,C]=(0,a.useState)(!1),[A,T]=(0,a.useState)(!1);(0,a.useEffect)(()=>{R()},[x,O,d,e]);let R=()=>{u.getListOrder({keyword:d,page:x/O+1}).then(e=>{s(e.orders),c(e.pagination.totalDocuments)})},_=async(n,r)=>{T(!0);let a=await u.putOrder({orderId:n,statusOrder:r});a?(t(!e),T(!1),o().fire({icon:"success",title:"Thay đổi th\xe0nh c\xf4ng"})):(o().fire({icon:"error",title:"Thay đổi thất bại"}),T(!1))},I=e=>{E(e),C(!0)},L=async n=>{let r=await u.putOrder({orderId:n,statusOrder:"4"});r?(o().fire({icon:"success",title:"X\xf3a th\xe0nh c\xf4ng"}),t(!e)):o().fire({icon:"error",title:"X\xf3a thất bại"})};return(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)(j.Z,{visible:A}),(0,r.jsxs)(h.w,{value:n,stripedRows:!0,tableStyle:{minWidth:"50rem"},header:()=>(0,r.jsxs)("div",{className:"flex justify-content-between",children:[(0,r.jsx)(m.o,{type:"search",placeholder:"T\xecm kiếm",value:d,onChange:e=>g(e.target.value)}),(0,r.jsx)(b.z,{type:"button",icon:"pi pi-file-excel",severity:"success",rounded:!0,className:"mr-5",onClick:()=>{fetch(l._+"/export/orders").then(e=>e.blob()).then(e=>N()(e,"danh_sach_don_hang_"+new Date().toLocaleDateString())).catch(e=>console.log(e))}})]}),children:[(0,r.jsx)(p.s,{field:"index",header:"STT",align:"center",body:(e,t)=>t.rowIndex+1,style:{maxWidth:"3rem"}}),(0,r.jsx)(p.s,{field:"orderNumber",header:"M\xe3 đơn h\xe0ng",align:"center",body:e=>(0,r.jsx)("p",{onClick:()=>I(e._id),className:"hover:text-blue-600 cursor-pointer",children:e.orderNumber})}),(0,r.jsx)(p.s,{field:"customer.username",header:"T\xean kh\xe1ch h\xe0ng",align:"center"}),(0,r.jsx)(p.s,{field:"customer.phone",header:"Số điện thoại",align:"center"}),(0,r.jsx)(p.s,{field:"items.length",header:"Số lượng",align:"center"}),(0,r.jsx)(p.s,{field:"totalAmount",header:"Tổng đơn h\xe0ng",align:"center",body:e=>(0,r.jsxs)("p",{className:"font-bold",children:[e.totalAmount,".000đ"]})}),(0,r.jsx)(p.s,{field:"status",header:"Status",body:e=>{let t=[{name:"In progress",code:"2",bg:"bg-yellow-200"},{name:"Pending",code:"1",bg:"bg-cyan-200	"},{name:"Completed",code:"3",bg:"bg-primary-200	"},{name:"Cancel",code:"4",bg:"bg-red-200"}],n=t.filter(t=>t.name===e.status);return(0,r.jsx)(v.L,{value:n[0],options:t,optionLabel:"name",onChange:t=>_(e._id,t.target.value.code),className:"".concat(n[0].bg," w-full")})},align:"center"}),(0,r.jsx)(p.s,{field:"action",header:"",body:e=>(0,r.jsx)(b.z,{severity:"danger",onClick:()=>L(e._id),icon:"pi pi-trash"}),align:"center"})]}),(0,r.jsx)(y,{orderId:P,visible:k,setVisible:C}),(0,r.jsx)(f.D,{first:x,rows:O,totalRecords:i,onPageChange:e=>{w(e.first),S(e.rows)}})]})})}},9496:function(e,t,n){"use strict";var r=n(1712);t.Z=e=>{e.interceptors.request.use(e=>{let t=r.Z.get("tokenAdmin");if(t){let n=JSON.parse(t);e.headers.setAccept("application/json"),e.headers.setAuthorization("Bearer "+n.accessToken)}return e},e=>(console.error("Request interceptor error:",e),Promise.reject(e))),e.interceptors.response.use(e=>e,e=>(console.error("Response interceptor error:",e),r.Z.remove("tokenAdmin"),window.location.assign("/auth/login"),Promise.reject(e)))}},2900:function(e,t,n){"use strict";var r=n(9268),a=n(3671);n(6006),t.Z=e=>{let{visible:t}=e;return(0,r.jsx)("div",{className:"fixed top-0 left-0 right-0 bottom-0 bg-black-alpha-40 ".concat(t?"":"hidden"),style:{zIndex:"9999"},children:(0,r.jsx)("div",{className:"flex justify-content-center align-items-center h-full",children:(0,r.jsx)(a.G,{})})})}},113:function(e,t,n){"use strict";n.d(t,{M:function(){return c}});var r=n(856),a=n.n(r),s=n(447),o=n(7014),i=n(9496);let l=s.Z.create({baseURL:o._});(0,i.Z)(l);class c{static async postCategory(e){try{let t=await l.post("/products/category",{category:e});return t.data}catch(e){c.handleApiError(e)}}static async getListProduct(e){try{let{page:t="",limit:n="",keyword:r="",depth:a="3"}=e||{},s=await l.get("/products?page=".concat(t,"&limit=").concat(n,"&keyword=").concat(r,"&depth=").concat(a));return s.data}catch(e){c.handleApiError(e)}}static async postProduct(e){try{let t=await l.post("/products",e);return t.data}catch(e){c.handleApiError(e)}}static async getListCategory(){try{let e=await l.get("/products/category");return e.data}catch(e){c.handleApiError(e)}}static async getProductById(e){try{let t=await l.get("/products/".concat(e));return t.data}catch(e){c.handleApiError(e)}}static async getListCommentById(e){try{let t=await l.get("/products/rate/".concat(e));return t.data}catch(e){c.handleApiError(e)}}static async postComment(e){try{let t=await l.post("/products/rate",e);return t.data}catch(e){c.handleApiError(e)}}static async deleteProduct(e){try{let t=await l.delete("/products/".concat(e));return t.data}catch(e){c.handleApiError(e)}}static async putProduct(e){try{let t=await l.put("/products",e);return t.data}catch(e){c.handleApiError(e)}}static handleApiError(e){console.log("error: ",e.response.data.message),"Category is exits"===e.response.data.message?a().fire({icon:"warning",title:"Bad Request",text:"T\xean ph\xe2n loại đ\xe3 tồn tại vui l\xf2ng kiểm tra lại"}):a().fire({icon:"warning",title:"Bad Request",text:"Request failed with status code 400"===e.message?"Y\xeau cầu kh\xf4ng hợp lệ":e.message})}}},7014:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});let r="https://coffeewebapi-production.up.railway.app"},3702:function(e,t,n){"use strict";n.d(t,{z:function(){return f}});var r=n(6006),a=n(2124),s=n(9347),o=n(9424),i=n(5942),l=n(6878),c=n(3142);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,n){var r;return r=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==u(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===u(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=l.V.extend({defaultProps:{__TYPE:"Button",badge:null,badgeClassName:null,className:null,children:void 0,disabled:!1,icon:null,iconPos:"left",label:null,link:!1,loading:!1,loadingIcon:null,outlined:!1,raised:!1,rounded:!1,severity:null,size:null,text:!1,tooltip:null,tooltipOptions:null,visible:!0}});function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var f=r.memo(r.forwardRef(function(e,t){var n,l,u,f,b=r.useContext(c.Ou),g=h.getProps(e,b),x=h.setMetaData({props:g}).ptm,y=r.useRef(t);if(r.useEffect(function(){i.gb.combinedRefs(y,t)},[y,t]),!1===g.visible)return null;var v=g.disabled||g.loading,j=!v||g.tooltipOptions&&g.tooltipOptions.showOnDisabled,w=i.gb.isNotEmpty(g.tooltip)&&j,N={large:"lg",small:"sm"}[g.size],O=(0,i.AK)("p-button p-component",g.className,p(p(p({"p-button-icon-only":(g.icon||g.loading)&&!g.label&&!g.children,"p-button-vertical":("top"===g.iconPos||"bottom"===g.iconPos)&&g.label,"p-disabled":v,"p-button-loading":g.loading,"p-button-outlined":g.outlined,"p-button-raised":g.raised,"p-button-link":g.link,"p-button-text":g.text,"p-button-rounded":g.rounded,"p-button-loading-label-only":g.loading&&!g.icon&&g.label},"p-button-loading-".concat(g.iconPos),g.loading&&g.label),"p-button-".concat(N),N),"p-button-".concat(g.severity),g.severity)),S=(n=(0,i.AK)("p-button-icon p-c",p({},"p-button-icon-".concat(g.iconPos),g.label)),l=(0,i.dG)({className:n},x("icon")),n=(0,i.AK)(n,{"p-button-loading-icon":g.loading}),u=(0,i.dG)({className:n},x("loadingIcon")),f=g.loading?g.loadingIcon||r.createElement(a.L,d({},u,{spin:!0})):g.icon,i.Cz.getJSXIcon(f,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){p(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},l),{props:g})),P=function(){if(g.label){var e=(0,i.dG)({className:"p-button-label p-c"},x("label"));return r.createElement("span",e,g.label)}return!g.children&&!g.label&&r.createElement("span",{className:"p-button-label p-c",dangerouslySetInnerHTML:{__html:"&nbsp;"}})}(),E=function(){if(g.badge){var e=(0,i.AK)("p-badge",g.badgeClassName),t=(0,i.dG)({className:e},x("badge"));return r.createElement("span",t,g.badge)}return null}(),k=g.label?g.label+(g.badge?" "+g.badge:""):g["aria-label"],C=(0,i.dG)({ref:y,"aria-label":k,className:O,disabled:v},h.getOtherProps(g),x("root"));return r.createElement(r.Fragment,null,r.createElement("button",C,S,P,g.children,E,r.createElement(s.H,null)),w&&r.createElement(o.u,d({target:y,content:g.tooltip},g.tooltipOptions,{pt:x("tooltip")})))}));f.displayName="Button"},3671:function(e,t,n){"use strict";n.d(t,{G:function(){return l}});var r=n(6006),a=n(5942),s=n(6878),o=n(3142),i=s.V.extend({defaultProps:{__TYPE:"ProgressSpinner",id:null,style:null,className:null,strokeWidth:"2",fill:"none",animationDuration:"2s",children:void 0}}),l=r.memo(r.forwardRef(function(e,t){var n=r.useContext(o.Ou),s=i.getProps(e,n),l=r.useRef(null),c=(0,a.AK)("p-progress-spinner",s.className),d=i.setMetaData({props:s}).ptm;r.useImperativeHandle(t,function(){return{props:s,getElement:function(){return l.current}}});var u=(0,a.dG)({id:s.id,ref:l,style:s.style,className:c,role:"alert","aria-busy":!0},d("spinner")),p=(0,a.dG)({className:"p-progress-spinner-svg",viewBox:"25 25 50 50",style:{animationDuration:s.animationDuration}},d("spinner")),h=(0,a.dG)({className:"p-progress-spinner-circle",cx:"50",cy:"50",r:"20",fill:s.fill,strokeWidth:s.strokeWidth,strokeMiterlimit:"10"},d("circle"));return r.createElement("div",u,r.createElement("svg",p,r.createElement("circle",h)))}));l.displayName="ProgressSpinner"}},function(e){e.O(0,[1987,8123,434,2713,9424,543,8285,9683,6486,4307,7633,6324,2698,4390,9253,9257,1744],function(){return e(e.s=3393)}),_N_E=e.O()}]);